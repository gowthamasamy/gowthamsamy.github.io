<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Family Tree App</title>
  <link rel="stylesheet" href="style.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <h1>ðŸŒ³ Family Tree App</h1>

  <div id="controls">
    <button onclick="createTree()">+ New Tree</button>
    <select id="treeSelect" onchange="switchTree()"></select>
    <button onclick="toggleView()">Toggle List/Tree View</button>
    <button onclick="exportAllJSON()">Export JSON</button>
    <button onclick="exportAllPDF()">Export PDF</button>
    <button onclick="deleteCurrentTree()">Delete Current Tree</button>
    <button onclick="openPersonModal()">+ Add Person</button>
  </div>

  <div id="listView"></div>
  <div id="treeView" style="display:none;"></div>

  <!-- Add/Edit Person Modal -->
  <div id="personModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closePersonModal()">&times;</span>
      <h2 id="modalTitle">Add Person</h2>
      <form id="personForm">
        <input type="hidden" id="personId">
        <label>Name:</label>
        <input type="text" id="personName" required><br>
        <label>Gender:</label>
        <select id="personGender" required>
          <option value="">Select</option>
          <option value="Male">Male</option>
          <option value="Female">Female</option>
        </select><br>
        <label>DOB:</label>
        <input type="date" id="personDOB"><br>
        <label>Status:</label>
        <select id="personStatus" onchange="toggleDeathDate()">
          <option value="Alive">Alive</option>
          <option value="Dead">Dead</option>
        </select><br>
        <label id="deathLabel" style="display:none;">Death Date:</label>
        <input type="date" id="personDeath" style="display:none;"><br>
        <label>Marriage Date:</label>
        <input type="date" id="personMarriage"><br>
        <label>Kulam (Father's side):</label>
        <input type="text" id="personKulamFather"><br>
        <label>Kulam (Husband's side):</label>
        <input type="text" id="personKulamHusband"><br>
        <label>Father:</label>
        <select id="personFather"></select><br>
        <label>Mother:</label>
        <select id="personMother"></select><br>
        <label>Image:</label>
        <input type="file" id="personImage" accept="image/*"><br><br>
        <button type="submit">Save</button>
      </form>
    </div>
  </div>
  
  <!-- Add Relationship Modal -->
  <div id="relationModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeRelationModal()">&times;</span>
      <h2>Add Relationship</h2>
      <label>Existing Person:</label>
      <select id="existingPersonSelect"></select><br>
      <label>Relation:</label>
      <select id="relationType">
        <option value="">--Select--</option>
        <option value="son">Son</option>
        <option value="daughter">Daughter</option>
        <option value="father">Father</option>
        <option value="mother">Mother</option>
        <option value="spouse">Spouse</option>
        <option value="half-sibling">Half-sibling</option>
      </select><br><br>
      <button onclick="addRelationFromDropdown()">Add Relationship</button>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="app.js"></script>
</body>
</html>